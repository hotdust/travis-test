sudo: required
dist: trusty


language: java
jdk:
  - oraclejdk8


cache:
  directories:
    - $HOME/.m2/repository

before_install:
  # allocate commits to CI, not the owner of the deploy key
  - git config user.name "opentracingci"
  - git config user.email "opentracingci+opentracing@googlegroups.com"

  # setup https authentication credentials, used by ./mvnw release:prepare
  - git config credential.helper "store --file=.git/credentials"
  - echo "https://$GH_TOKEN:@github.com" > .git/credentials


install:
  # Override default travis to use the maven wrapper
  - ./mvnw install -DskipTests=true -Dmaven.javadoc.skip=true -B -V

deploy:
  # Deploy releases to bintray
  - provider: bintray
    skip_cleanup: true        # required to prevent Travis from cleaning the workspace before deployment
#    file: target/bintray.json # defines the Bintray project to deploy to, and what to deploy and where to.
    user: hotdust # fill in your account name
    key: $BINTRAY_API_KEY            # reference to your Bintray API key
    on: # only deploy when
      repo: hotdust/travis-test # only for this repo
#      tags: true                           # and only when a (release) tag was set


branches:
  except:
    - /^[0-9]/

#after_success:
#  - mvn jacoco:report coveralls:report
after_success:
  - mvn clean test jacoco:report coveralls:report

